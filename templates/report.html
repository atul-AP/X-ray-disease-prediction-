<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>X-ray Diagnosis Report</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --primary: #0d6efd;
      --background: linear-gradient(135deg, #a1c4fd, #c2e9fb);
      --text-color: #333;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: var(--background);
      padding: 40px 20px;
      color: var(--text-color);
    }

    .report-container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    h2 {
      color: var(--primary);
      text-align: center;
      margin-bottom: 20px;
    }

    .report-section {
      margin: 10px 0;
      font-size: 1rem;
    }

    .report-section strong {
      display: inline-block;
      width: 180px;
    }

    .xray-image {
      display: block;
      max-width: 100%;
      height: auto;
      margin: 30px auto;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
    }

    .confidence-bar {
      height: 16px;
      width: 100%;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 6px;
    }

    .confidence-fill {
      height: 100%;
      background: #28a745;
    }

    .footer-note {
      margin-top: 40px;
      font-style: italic;
      font-size: 0.9rem;
      text-align: center;
      color: #555;
    }

    .actions {
      margin-top: 30px;
      text-align: center;
    }

    .actions button,
    .actions a {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 10px 18px;
      margin: 5px;
      border-radius: 8px;
      font-size: 1rem;
      text-decoration: none;
      cursor: pointer;
    }

    .actions button:hover,
    .actions a:hover {
      background-color: #084ec1;
    }

    @media print {
      .actions {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="report-container">
    <h2>ü©ª AI X-ray Diagnosis Report</h2>

    <div class="report-section"><strong>User ID:</strong> {{ user_id | default('N/A') }}</div>
    <div class="report-section"><strong>Patient Name:</strong> {{ name | default('N/A') }}</div>
    <div class="report-section"><strong>Age:</strong> {{ age | default('N/A') }}</div>
    <div class="report-section"><strong>Gender:</strong> {{ gender | default('N/A') }}</div>
    <div class="report-section"><strong>Blood Group:</strong> {{ blood_group | default('N/A') }}</div>
    <div class="report-section"><strong>Height:</strong> {{ height | default('N/A') }} cm</div>
    <div class="report-section"><strong>Weight:</strong> {{ weight | default('N/A') }} kg</div>
    <div class="report-section"><strong>Email:</strong> {{ email | default('N/A') }}</div>
    <div class="report-section"><strong>Phone:</strong> {{ phone | default('N/A') }}</div>
    <div class="report-section"><strong>Date:</strong> {{ date | default('N/A') }}</div>

    <div class="report-section"><strong>Diagnosis:</strong> {{ diagnosis_text | default('Pending') }}</div>
    <div class="report-section"><strong>Confidence:</strong> {{ confidence_text | default('0') }}%</div>

    <div class="confidence-bar">
      <div class="confidence-fill" style="width: {{ confidence_text | default('0') }}%;"></div>
    </div>

    <img src="{{ image_path | default('/static/default-xray.png') }}" alt="X-ray Image" class="xray-image" />

    <div class="report-section"><strong>Detected By:</strong> AI Model v1.3 (CNN-based)</div>
    <div class="report-section"><strong>Detection Insight:</strong> {{ detection_info | default('No insight available.') }}</div>
    <div class="report-section"><strong>Precautionary Advice:</strong> {{ precaution_info | default('No advice available.') }}</div>

    <div class="actions">
      <button onclick="window.print()">üñ®Ô∏è Download/Print PDF</button>
      <a href="https://api.whatsapp.com/send?text=Check%20out%20my%20X-ray%20report%20diagnosed%20by%20AI:%20{{ share_link | url_encode }}" target="_blank">üì§ Share on WhatsApp</a>
    </div>

    <div class="footer-note">
      This report was generated by the AI-Powered X-ray Disease Detection System.<br />
      Please consult a healthcare professional for final diagnosis and treatment.
    </div>
  </div>
</body>
</html>
